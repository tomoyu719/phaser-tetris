# ワイヤーフレーム設計書

## 1. 全体レイアウト

### 1.1 キャンバスサイズ

| 項目 | サイズ |
|------|--------|
| 全体キャンバス | 512 × 640 px |
| ゲームフィールド | 320 × 640 px（左側） |
| UI領域 | 192 × 640 px（右側） |

### 1.2 座標系

```
(0,0)                              (512,0)
  +----------------+---------------+
  |                |               |
  |  Game Field    |   UI Area     |
  |  (320×640)     |   (192×640)   |
  |                |               |
  +----------------+---------------+
(0,640)           (320,640)       (512,640)
```

---

## 2. タイトル画面（TitleScene）

### 2.1 レイアウト図

```
+--------------------------------------------------+
|                                                  |
|                                                  |
|                    (装飾エリア)                   |
|                                                  |
|  ================================================|
|                                                  |
|                     TETRIS                       |  ← Y: 200px
|                                                  |
|  ================================================|
|                                                  |
|                                                  |
|               ─────  操作説明  ─────              |  ← Y: 320px
|                                                  |
|                  ← → : Move                      |
|                   ↓  : Soft Drop                 |
|                   ↑  : Rotate                    |
|                                                  |
|                                                  |
|  ================================================|
|                                                  |
|              PRESS SPACE TO START                |  ← Y: 520px
|                                                  |
|                                                  |
+--------------------------------------------------+
```

### 2.2 要素配置詳細

| 要素 | X座標 | Y座標 | 配置 | フォントサイズ |
|------|-------|-------|------|---------------|
| タイトル「TETRIS」 | 256 | 200 | 中央揃え | 64px |
| 操作説明ラベル | 256 | 320 | 中央揃え | 20px |
| 操作説明テキスト | 256 | 360〜440 | 中央揃え | 18px |
| 開始案内 | 256 | 520 | 中央揃え | 24px |

### 2.3 表示テキスト一覧

| 要素 | 表示テキスト | 備考 |
|------|-------------|------|
| タイトル | `TETRIS` | 大文字、装飾なし |
| 操作説明ヘッダー | `- CONTROLS -` | 区切り線風 |
| 移動説明 | `← →  Move` | 左右矢印 + 説明 |
| 落下説明 | `↓  Soft Drop` | 下矢印 + 説明 |
| 回転説明 | `↑ / Z  Rotate Left` | 上矢印またはZ |
| 回転説明2 | `X  Rotate Right` | Xキー |
| 開始案内 | `PRESS SPACE TO START` | 点滅アニメーション推奨 |

#### 表示例

```
TETRIS


- CONTROLS -

← →  Move
 ↓   Soft Drop
↑/Z  Rotate Left
 X   Rotate Right


PRESS SPACE TO START
```

### 2.4 装飾（オプション）

- 四隅にテトリミノ風ブロック（小さめ）を配置可能
- 必須ではないため、実装優先度は低

---

## 3. ゲーム画面（GameScene）

### 3.1 全体レイアウト図

```
+--------------------+---------------------------+
|                    |                           |
|                    |   NEXT                    |  ← Y: 32px
|                    |   +---------------+       |
|                    |   |               |       |
|                    |   |   (4×4マス)    |       |  ← 128×128px
|                    |   |               |       |
|                    |   +---------------+       |  ← Y: 192px
|   GAME FIELD       |                           |
|                    |                           |
|   10×20 マス        |   SCORE                   |  ← Y: 280px
|   (320×640px)      |                           |
|                    |   000000                  |  ← Y: 320px
|                    |                           |
|                    |                           |
|                    |                           |
|                    |                           |
|                    |                           |
|                    |                           |
|                    |                           |
+--------------------+---------------------------+
```

### 3.2 ゲームフィールド詳細

```
← 320px →
+----------------------------------+ ─┬─
|  (0,0)               (9,0)       |  │
|   ┌──┬──┬──┬──┬──┬──┬──┬──┬──┬──┐ |  │
|   │  │  │  │  │  │  │  │  │  │  │ |  │
|   ├──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤ |  │
|   │  │  │  │  │  │  │  │  │  │  │ |  │
|   ├──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤ |  │
|   :  :  :  :  :  :  :  :  :  :  : |  │
|   :     (グリッド線は非表示)      : |  640px
|   :        10列 × 20行           : |  │
|   :       各セル 32×32px         : |  │
|   :  :  :  :  :  :  :  :  :  :  : |  │
|   ├──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤ |  │
|   │  │  │  │  │  │  │  │  │  │  │ |  │
|   └──┴──┴──┴──┴──┴──┴──┴──┴──┴──┘ |  │
|  (0,19)             (9,19)       |  │
+----------------------------------+ ─┴─
```

| 項目 | 値 |
|------|-----|
| 位置 | X: 0, Y: 0 |
| サイズ | 320 × 640 px |
| セル数 | 10列 × 20行 |
| セルサイズ | 32 × 32 px |
| 外枠 | 白/明るいグレー、1〜2px |
| グリッド線 | 非表示 |
| 背景色 | 暗いグレー (#1a1a1a 程度) |

### 3.3 UI領域詳細

```
← 192px →
+---------------------------+ ─┬─
|         (padding)         |  │ 32px
|   NEXT                    |  ← ラベル Y: 32px
|   +---------------+       |  │
|   |               |       |  │
|   |   ■ ■ ■ ■     |       |  │ 128px
|   |               |       |  │
|   +---------------+       |  │
|         (余白)            |  │
|                           |  │
|   SCORE                   |  ← ラベル Y: 280px
|                           |  │
|   000000                  |  ← 数値 Y: 320px
|                           |  │
|                           |  │
|         (余白)            |  │
|                           |  │
|                           |  │
|                           |  │
|                           |  │
+---------------------------+ ─┴─
```

#### NEXT表示

| 項目 | 値 |
|------|-----|
| ラベル「NEXT」位置 | X: 416 (中央), Y: 32 |
| ラベルフォントサイズ | 20px |
| 表示枠位置 | X: 352, Y: 64 |
| 表示枠サイズ | 128 × 128 px (4×4マス相当) |
| 枠線 | 白/明るいグレー、1px |
| 背景 | 暗いグレー（フィールドと同系色） |

#### SCORE表示

| 項目 | 値 |
|------|-----|
| ラベル「SCORE」位置 | X: 416 (中央), Y: 280 |
| ラベルフォントサイズ | 20px |
| 数値位置 | X: 416 (中央), Y: 320 |
| 数値フォントサイズ | 28px |
| 数値フォーマット | 6桁固定（000000） |

### 3.4 表示テキスト一覧

| 要素 | 表示テキスト | 備考 |
|------|-------------|------|
| NEXTラベル | `NEXT` | 大文字、固定 |
| SCOREラベル | `SCORE` | 大文字、固定 |
| スコア初期値 | `000000` | 6桁ゼロ埋め |

#### スコア表示例

| 得点 | 表示 |
|------|------|
| 0点 | `000000` |
| 100点 | `000100` |
| 1,500点 | `001500` |
| 99,999点 | `099999` |
| 123,456点 | `123456` |

---

## 4. ゲームオーバー画面（オーバーレイ）

### 4.1 レイアウト図

```
+--------------------------------------------------+
|                                                  |
|  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓|
|  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓|
|  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓|
|  ▓▓▓▓▓▓▓▓▓ (半透明オーバーレイ) ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓|
|  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓|
|  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓|
|  ▓▓▓▓▓▓▓▓▓▓▓▓+────────────────+▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓|
|  ▓▓▓▓▓▓▓▓▓▓▓▓|                |▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓|
|  ▓▓▓▓▓▓▓▓▓▓▓▓|   GAME OVER    |▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓|  ← Y: 280px
|  ▓▓▓▓▓▓▓▓▓▓▓▓|                |▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓|
|  ▓▓▓▓▓▓▓▓▓▓▓▓|  SCORE: 12300  |▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓|  ← Y: 340px
|  ▓▓▓▓▓▓▓▓▓▓▓▓|                |▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓|
|  ▓▓▓▓▓▓▓▓▓▓▓▓| Press SPACE    |▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓|  ← Y: 400px
|  ▓▓▓▓▓▓▓▓▓▓▓▓|   to Retry     |▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓|
|  ▓▓▓▓▓▓▓▓▓▓▓▓+────────────────+▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓|
|  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓|
|  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓|
+--------------------------------------------------+
```

### 4.2 要素配置詳細

| 要素 | X座標 | Y座標 | 配置 | 備考 |
|------|-------|-------|------|------|
| オーバーレイ | 0 | 0 | 全画面 | 半透明黒 (rgba(0,0,0,0.7)) |
| 「GAME OVER」 | 256 | 280 | 中央揃え | 48px、白 |
| 最終スコア | 256 | 340 | 中央揃え | 24px、白 |
| リトライ案内 | 256 | 400 | 中央揃え | 20px、白 |

### 4.3 表示テキスト一覧

| 要素 | 表示テキスト | 備考 |
|------|-------------|------|
| ゲームオーバー | `GAME OVER` | 大文字、目立つサイズ |
| スコアラベル | `SCORE` | ラベル部分 |
| スコア値 | `{score}` | 実際のスコア値（ゼロ埋めなし可） |
| リトライ案内 | `PRESS SPACE TO RETRY` | 点滅アニメーション推奨 |

> **遷移先**: SPACEキーで**GameSceneへ直接遷移**（タイトルを経由せず即リトライ）

#### 表示例

```
GAME OVER

SCORE
12300

PRESS SPACE TO RETRY
```

---

## 5. カラーパレット

### 5.1 基本色

| 用途 | 色 | HEX |
|------|-----|-----|
| 背景 | 黒/暗いグレー | #0a0a0a / #1a1a1a |
| テキスト | 白 | #ffffff |
| 枠線 | 明るいグレー | #888888 |
| オーバーレイ | 半透明黒 | rgba(0,0,0,0.7) |

### 5.2 テトリミノ色

| 種類 | 色名 | HEX |
|------|------|-----|
| I | シアン | #00f0f0 |
| O | 黄色 | #f0f000 |
| T | 紫 | #a000f0 |
| S | 緑 | #00f000 |
| Z | 赤 | #f00000 |
| J | 青 | #0000f0 |
| L | オレンジ | #f0a000 |

---

## 6. 座標早見表

### 6.1 主要座標一覧

| 要素 | X | Y | 幅 | 高さ |
|------|---|---|-----|------|
| ゲームフィールド | 0 | 0 | 320 | 640 |
| UI領域 | 320 | 0 | 192 | 640 |
| NEXTラベル | 416 | 32 | - | - |
| NEXT枠 | 352 | 64 | 128 | 128 |
| SCOREラベル | 416 | 280 | - | - |
| SCORE数値 | 416 | 320 | - | - |

### 6.2 セル座標変換式

```
ピクセル座標 = セル座標 × セルサイズ
pixelX = cellX × 32
pixelY = cellY × 32

例: セル(5, 10) → ピクセル(160, 320)
```

---

## 7. 画面遷移図

```
┌─────────────┐
│ TitleScene  │
│  (タイトル)  │
└──────┬──────┘
       │ SPACE キー
       ▼
┌─────────────────────────────────┐
│ GameScene                       │
│  (ゲーム)                        │◄──┐
│                                 │   │
│  ┌───────────────────────────┐  │   │
│  │ ゲームオーバー時:           │  │   │
│  │ オーバーレイ表示 (GAME OVER)│──┼───┘
│  └───────────────────────────┘  │ SPACE キー
│                                 │ (即リトライ)
└─────────────────────────────────┘
```

> **ポイント**: ゲームオーバーは別シーンではなく、GameScene内のオーバーレイとして表示。
> SPACEキーでGameSceneを再起動し、即座にリトライできる。

---

## 8. 改訂履歴

| 日付 | バージョン | 内容 |
|------|-----------|------|
| 2025-01-22 | 1.0 | 初版作成 |
| 2025-01-22 | 1.1 | 各画面の表示テキスト一覧を追加 |
| 2025-01-22 | 1.2 | リトライ遷移先をGameScene直接再起動に明記、画面遷移図を更新 |
